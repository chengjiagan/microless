apiVersion: v1
kind: ConfigMap
metadata:
  name: post-storage-lb-config
  namespace: social-network
data:
  lb-serverless.json: |
    {
      "server": {
        "enable": false
      },
      "client": {
        "enable": true,
        "vm_postfix": "-vm",
        "serverless_postfix": "-serverless",
        "update_interval": 1,
        "retry": 3,
        "service_rate_limit": {
          "post-storage": 900,
          "user-timeline": 600,
          "user": 100,
          "social-graph": 100,
          "home-timeline": 600,
          "media": 100,
          "url-shorten": 100,
          "user-mention": 100,
          "text": 100,
          "compose-post": 100
        },
        "local_services": {},
        "redis_addr": "redis://172.17.0.10:6379/7"
      },
      "serverless": {
        "enable": true,
        "max_concurrency": 1,
        "max_capacity": 10,
        "method_requirements": {}
      }
    }
